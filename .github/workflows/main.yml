name: Santa CI

on: push

jobs:
  test:
    runs-on: ubuntu-latest
    container:
      image: node:16
    steps:
      - uses: actions/checkout@v2
      - name: Install global dependencies
        run: npm install -g elm elm-test elm-format
      - name: Install local dependencies
        run: npm install
      - name: Check formatting of source files
        run: elm-format ./src --validate
      - name: Check formatting of test files
        run: elm-format ./tests --validate
      - name: Elm review
        run: ./node_modules/.bin/elm-review
      - name: Run tests
        run: elm-test
